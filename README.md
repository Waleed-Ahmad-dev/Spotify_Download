# Spotify Downloader & Recorder

**Author:** Waleed-Ahmad-dev (Shadow Scripter)  
**Contact:** itswaleedqureshi@gmail.com  
**Version:** 1.0

---

## Project Overview

The **Spotify Downloader & Recorder** is a powerful, dual-interface (CLI & GUI) tool designed to help you archive your favorite music. Unlike simple downloaders that rely solely on metadata matching, this tool offers a unique **hybrid approach**:

1.  **Recording (Linux Only):** It interacts directly with the Linux Media Player Interface (MPRIS) via `playerctl` to capture exact song titles and artists from your running Spotify client while you play them. This ensures 100% accuracy for your specific playlist.
2.  **Searching:** It uses a robust, verification-heavy search algorithm to find the exact YouTube match for each song.
3.  **Downloading:** It leverages `yt-dlp` and `ffmpeg` to download high-quality audio and convert it to MP3.

Whether you prefer a terminal environment or a graphical user interface, this project has you covered.

---

## Features

- **GUI & CLI Support:** Run the full suite of tools from a user-friendly Tkinter GUI or a scriptable Command Line Interface.
- **Precision Recording:** Automatically captures song metadata as you listen to your Spotify playlist.
- **Smart Duplicate Detection:** skips songs that have already been recorded to prevent duplicates in your list.
- **Robust YouTube Search:** Prioritizes accuracy over speed, verifying results to ensure you get the correct song, not just the first result.
- **Automated Downloading:** High-quality MP3 extraction (192kbps) with automatic FFmpeg conversion.
- **Desktop Integration:** Native desktop entry support for Linux environments.

---

## Prerequisites

Before using the tool, ensure you have the following system dependencies installed.

### System Dependencies

- **Python 3.6+**
- **FFmpeg:** Required for audio conversion.
- **Playerctl:** Required for Spotify recording (Linux only).

#### Install on Ubuntu/Debian:

```bash
sudo apt update
sudo apt install python3 python3-pip python3-tk ffmpeg playerctl
```

#### Install on Fedora:

```bash
sudo dnf install python3 python3-pip python3-tkinter ffmpeg playerctl
```

#### Install on Arch Linux:

```bash
sudo pacman -S python python-pip tk ffmpeg playerctl
```

### Python Dependencies

Install the required Python library:

```bash
pip install yt-dlp
```

---

## Installation

### Method 1: Manual Installation (Recommended for Developers)

1.  **Clone the Repository:**

    ```bash
    git clone https://github.com/Waleed-Ahmad-dev/download_songs.git
    cd download_songs
    ```

2.  **Set up a Virtual Environment (Optional but Recommended):**
    ```bash
    python3 -m venv venv
    source venv/bin/activate
    pip install yt-dlp
    ```

### Method 2: Deb Package (For Debian/Ubuntu Users)

If a `.deb` package is provided in the releases:

1.  Download the `spotify-downloader-gui_1.0_all.deb` file.
2.  Install it using `dpkg`:
    ```bash
    sudo dpkg -i spotify-downloader-gui_1.0_all.deb
    sudo apt-get install -f  # Fix any missing dependencies
    ```
3.  Launch the application from your application menu.

---

## Usage

### Graphical User Interface (GUI)

To start the GUI:

```bash
python3 gui.py
```

1.  **Tab 1: Record:**
    - Open Spotify and start playing your playlist.
    - Ensure **Shuffle is OFF** and **Repeat is ON**.
    - Click **Start Recording**. The app will auto-skip through your playlist and record titles.
    - Click **Stop** when done, then **Save to File**.

2.  **Tab 2: Search:**
    - Select your recorded songs file (e.g., `my_playlist_songs.txt`).
    - Click **Start Search**. This process takes time to ensure accuracy.

3.  **Tab 3: Download:**
    - Select the `found_songs.txt` file generated by the search.
    - Choose an output folder.
    - Click **Start Download**.

### Command Line Interface (CLI)

The `main.py` script handles all operations.

**1. Record from Spotify (Linux Only):**

```bash
python3 main.py record -o my_playlist.txt
```

**2. Search YouTube:**

```bash
python3 main.py search -i my_playlist.txt -f found.txt -n missing.txt
```

**3. Download MP3s:**

```bash
python3 main.py download -i found.txt -o ./music_folder
```

**4. Run All Steps Sequentially:**

```bash
python3 main.py all -p my_playlist.txt
```

---

## Contribution Guidelines

We welcome contributions from the community! To ensure high code quality and maintainability, please adhere to the following strict guidelines.

### 1. Code Style & Standards

- **PEP 8 Compliance:** All Python code must strictly follow PEP 8 standards. Use extensive comments to explain complex logic.
- **Typing:** Use Python's `typing` module for function arguments and return values.
- **Docstrings:** Every function and class must have a docstring describing its purpose, parameters, and return integrity.
- **No Magic Numbers:** Define constants at the top of files instead of using hardcoded values.

### 2. Pull Request (PR) Process

- **Descriptive Titles:** Use conventional commit formats (e.g., `feat: add proxy support`, `fix: resolve gui freeze`).
- **Detailed Descriptions:** explain _what_ you changed, _why_ you changed it, and _how_ you tested it.
- **Single Responsibility:** Each PR should address exactly one issue or feature. Do not bundle multiple unrelated changes.

### 3. Testing

- **Manual Verification:** Since this tool interacts with external services (Spotify, YouTube), you must provide proof of manual testing (screenshots or logs) in your PR.
- **Edge Cases:** Test your changes against edge cases (e.g., songs with special characters, network interruptions, empty files).

### 4. branching Strategy

- `main`: The stable production branch. Do not push directly to main.
- `develop`: The active development branch. Target your PRs here.
- Feature branches: `feature/your-feature-name`
- Bugfix branches: `fix/issue-description`

---

## Disclaimer

This tool is for **educational and personal archiving purposes only**. The author (Waleed-Ahmad-dev) does not condone piracy. Please respect the copyright of artists and ensure you have the right to download the content.

---

**Copyright Â© 2026 Waleed-Ahmad-dev (Shadow Scripter). All Rights Reserved.**
